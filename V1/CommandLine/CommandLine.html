<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Configure EdgeCmd utility </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Configure EdgeCmd utility ">
    <meta name="generator" content="docfx 2.43.2.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../V1/index.html" width="46">
                <img id="logo" src="../../V1/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Edge System"> 
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="commandLine">
<h1 id="configure-edgecmd-utility">Configure EdgeCmd utility</h1>

<p>The following sections provide instructions for the configuration of EdgeCmd utility for Windows or Linux.</p>
<p><strong>Note:</strong> The following EdgeCmd utility locations are based on the installation instructions in <a class="xref" href="Install%20EdgeCmd%20utility.html">EdgeCmd utility</a>.</p>
<h2 id="access-edgecmd-on-windows">Access EdgeCmd on Windows</h2>
<p>Complete the following to access EdgeCmd on Windows:</p>
<ol>
<li>Open a command prompt.</li>
<li><p>Type the following in the prompt and press Enter:</p>
<pre><code class="lang-cmd">C:\Program Files\OSIsoft\EdgeCmd\edgecmd.exe
</code></pre><p><strong>Note:</strong> Specify the full path when you use EdgeCmd on Windows.</p>
</li>
</ol>
<h2 id="access-edgecmd-on-linux">Access EdgeCmd on Linux</h2>
<p>Complete the following to access EdgeCmd on Linux:</p>
<ol>
<li>Open a terminal window.</li>
<li><p>Type the following in the terminal and press Enter.</p>
<pre><code class="lang-bash">/opt/OSIsoft/EdgeCmd/edgecmd
</code></pre><p><strong>Note:</strong> You can access EdgeCmd without using the full path on Linux. </p>
</li>
</ol>
<h2 id="configure-edge-data-store-with-edgecmd">Configure Edge Data Store with EdgeCmd</h2>
<p>All configuration options that can be done using REST can also be done using the EdgeCmd utility and command line arguments.  Configuration and administrative REST interfaces are generally exposed through the command line. Read/write capabilities to the EDS storage component, OMF ingresss and SDS read/write capabilities are only available using the REST API.</p>
<h3 id="get-help">Get help</h3>
<p>The Edgecmd utility provides a &#39;Help&#39; utility. Complete the following to view general instructions on how to use the Edgecmd utility:</p>
<ol>
<li>Open command line.</li>
<li><p>Type the following in the command line and press Enter.</p>
<pre><code class="lang-bash">edgecmd Help
</code></pre></li>
<li><p>Optional: To receive help output for every configuration facet that a registered component supports, add a specific component ID to the end of the previous command. See example <a href="#help-for-the-system-component">Help for the System component</a>.</p>
<p> <strong>Note:</strong> The help output also provides examples of commands that you can run to configure the component.</p>
</li>
<li><p>Optional: To view help for a specific facet within a component, add the facet name after the component ID. See the example <a href="#help-for-the-port-facet-within-the-system-component">Help for the Port facet within the System component</a>.</p>
</li>
</ol>
<h4 id="examples">Examples</h4>
<h5 id="help-for-the-system-component">Help for the System component:</h5>
<pre><code class="lang-bash">edgecmd Help System

---------------------------------------------------------------------------------------------------------
Component System command-line options =&gt; &#39;Logging&#39;
---------------------------------------------------------------------------------------------------------
LogLevel                    [Required] Desired log level settings. Options: Verbose, Information, Warning, Error, Fatal.
LogFileSizeLimitBytes       [Required] Maximum size in bytes of log files that the service will create for this component. Must be no less than 1000.
LogFileCountLimit           [Required] Maximum number of log files that the service will create for this component. Must be a positive integer.

Example: ./edgecmd Configuration System Logging LogLevel=Warning
Example: ./edgecmd Configuration System Logging LogFileSizeLimitBytes=32768
Example: ./edgecmd Configuration System Logging LogFileCountLimit=5


---------------------------------------------------------------------------------------------------------
Component System command-line options =&gt; &#39;HealthEndpoints&#39;
---------------------------------------------------------------------------------------------------------
Id                           [Optional] Id of existing configuration to be edited of removed.
Endpoint                     [Required] URL of OMF destination
UserName                     [Required group 1]  User name used for authentication to PI Web API OMF endpoint.
Password                     [Required group 1]  Password used for authentication to PI Web API OMF endpoint.
ClientId                     [Required group 2]  Client ID used for authentication to OSIsoft Cloud Services.
ClientSecret                 [Required group 2]  Client Secret used for authentication to OSIsoft Cloud Services.
Buffering                    [Optional] Set the buffering type for messages to this endpoint. Options are &#39;memory&#39;, &#39;disk&#39; or &#39;none&#39;. Defaults to &#39;none&#39;.
MaxBufferSizeMB              [Optional] If an integer &gt;0, this is the limit on the maximum megabytes of data to buffer for messages to this endpoint. Useful for limiting memory or disk usage growth in the event of disconnection to the endpoint. If the buffer is full, old messages will be discarded for new messages. Defaults to 0.
ValidateEndpointCertificate  [Optional] If true, endpoint certificate will be validated (recommended). If false, any endpoint certificate will be accepted. OSIsoft strongly recommends using disabled endpoint certificate validation for testing purposes only.

Note: Only one Required group must be specified. Group 1 for PI Web API or Group 2 for OCS.
Example: ./edgecmd Configuration System HealthEndpoints Endpoint=endpointURL UserName=UserName Password=Password


---------------------------------------------------------------------------------------------------------
Component System command-line options =&gt; &#39;Port&#39;
---------------------------------------------------------------------------------------------------------
Port                        [Required] The tcp port to bind this application host to (Range [1024,65535])

Example: ./edgecmd Configuration System Port Port=5590


---------------------------------------------------------------------------------------------------------
Component System command-line options =&gt; &#39;Components&#39;
---------------------------------------------------------------------------------------------------------
ComponentId                        [Required] ID of the hosted component.
ComponentType                      [Required] Type of the hosted component.

Example: ./edgecmd Configuration System Components ComponentId=Modus1 ComponentType=Modbus
</code></pre><h5 id="help-for-the-port-facet-within-the-system-component">Help for the Port facet within the System component</h5>
<pre><code class="lang-bash">edgecmd Help System Port

---------------------------------------------------------------------------------------------------------
Component System command-line options =&gt; &#39;Port&#39;
---------------------------------------------------------------------------------------------------------
Port                        [Required] The tcp port to bind this application host to (Range [1024,65535])

Example: ./edgecmd Configuration System Port Port=5590
</code></pre><h3 id="edge-data-store-components">Edge Data Store components</h3>
<p>The EdgeCmd utility enables you to add, configure, and delete Edge Data Store components.</p>
<h4 id="view-components">View components</h4>
<p>Complete the following to view which components are currently configured on Edge Data Store.</p>
<ol>
<li>Open command line.</li>
<li><p>Type the following in the command line and press Enter.</p>
<pre><code class="lang-bash">edgecmd Configuration System Components
</code></pre></li>
</ol>
<h4 id="add-components">Add components</h4>
<p>Complete the following to register a new component.</p>
<ol>
<li>Open command line.</li>
<li><p>Type the following in the command line, replacing <code>&lt;componentId&gt;</code> and <code>&lt;componentType&gt;</code> with the values that you want and press Enter.</p>
<p> <strong>Note:</strong> Valid component types are &quot;Modbus&quot; and &quot;OpcUa&quot;. If you are trying to register a Modbus EDS adapter, use &quot;Modbus&quot; and if you are trying to register an OPC UA adapter, use &quot;OpcUa&quot;.</p>
<pre><code class="lang-bash">edgecmd Configuration System Components componentId=&lt;componentId&gt; componentType=&lt;componentType&gt;
</code></pre><p> Example: Modbus adapter component registration:</p>
<pre><code class="lang-bash">edgecmd Configuration System Components componentId=Modbus1 componentType=Modbus
</code></pre></li>
</ol>
<h4 id="configure-components">Configure components</h4>
<p>The EDS Modbus adapter and OPC UA adapter each have three configurable facets: data source, data selection, and logging. Complete the following to configure a facet.</p>
<ol>
<li>Open command line.</li>
<li><p>Type the following in the command line, replacing <code>&lt;componentId&gt;</code> and <code>&lt;facetName&gt;</code> with the values that you want.</p>
<pre><code class="lang-bash">edgecmd Configuration &lt;componentId&gt; &lt;facetName&gt;
</code></pre></li>
<li><p>Add key-value pairs to specify which values of the facet that you want to configure are to be changed and press Enter.</p>
<p> Example: Configuration of the data source facet of a Modbus adapter:</p>
<pre><code class="lang-bash">edgecmd Configuration Modbus1 DataSource IpAddress=117.23.45.110 port=502 ConnectTimeout=15000 StreamIdPrefix=&quot;DataSource1&quot;
</code></pre></li>
</ol>
<p>For detailed information on how to configure each adapter, see <a class="xref" href="../OpcUa/OpcUaOverview.html">OPC UA EDS adapter</a> and <a class="xref" href="../Modbus/ModbusOverview.html">Modbus TCP EDS adapter</a> schemas.</p>
<h4 id="delete-components">Delete components</h4>
<p>Complete the following to delete components from the Edge Data Store.</p>
<ol>
<li>Open command line.</li>
<li><p>Type the following in the command line, replacing <code>&lt;componentId&gt;</code> with the ID of the component that you want to delete, and press Enter.</p>
<pre><code class="lang-bash">edgecmd Configuration System Components id=&lt;componentId&gt; delete
</code></pre></li>
</ol>
<p><strong>Note:</strong> You cannot delete the Storage component because it is required for Edge Data Store to operate.</p>
<h3 id="retrieve-existing-system-configuration">Retrieve existing system configuration</h3>
<p>You can use the edgecmd utility to view the configuration for each part of Edge Data Store.</p>
<p>Complete the following to view the entire configuration for every component in Edge Data Store:</p>
<ol>
<li>Open command line.</li>
<li><p>Type the following in the command line and press Enter.</p>
<pre><code class="lang-bash">   edgecmd Configuration
</code></pre></li>
</ol>
<p>Complete the following to retrieve component specific configuration:</p>
<ol>
<li>Open command line.</li>
<li><p>Type the following in the command line, replacing <code>&lt;componentId&gt;</code> with the ID of the component, and press Enter.</p>
<pre><code class="lang-bash">   edgecmd Configuration &lt;componentId&gt;
</code></pre></li>
</ol>
<p>Complete the following to retrieve facet specific configuration of an Edge Data Store component:</p>
<ol>
<li>Open command line.</li>
<li><p>Type the following in the command line, replacing <code>&lt;componentId&gt;</code> and <code>&lt;facetName&gt;</code> with the ID of the component and the facet name, and press Enter.</p>
<pre><code class="lang-bash">   edgecmd Configuration &lt;componentId&gt; &lt;facetName&gt;
</code></pre></li>
</ol>
<p>Complete the following to retrieve the configuration for a specific facet entry:</p>
<ol>
<li>Open command line.</li>
<li><p>Type the following in the command line, replacing <code>&lt;componentId&gt;</code> and <code>&lt;facetName&gt;</code> with the ID of the component and the facet name.</p>
<pre><code class="lang-bash">   edgecmd Configuration &lt;componentId&gt; &lt;facetName&gt; id=IndexToRetrieve
</code></pre></li>
<li><p>Add the parameters and their values for the facet to configure and press Enter.</p>
</li>
</ol>
<h4 id="examples-1">Examples</h4>
<h5 id="view-the-configuration-of-the-system-component">View the configuration of the &#39;System&#39; component</h5>
<pre><code class="lang-bash">edgecmd Configuration System
{
  &quot;Logging&quot;: {
    &quot;logLevel&quot;: &quot;Information&quot;,
    &quot;logFileSizeLimitBytes&quot;: 34636833,
    &quot;logFileCountLimit&quot;: 31
  },
  &quot;HealthEndpoints&quot;: [],
  &quot;Port&quot;: {
    &quot;port&quot;: 5590
  },
  &quot;Components&quot;: [
    {
      &quot;componentId&quot;: &quot;Storage&quot;,
      &quot;componentType&quot;: &quot;EDS.Component&quot;
    }
  ]
}
</code></pre><h5 id="view-the-configuration-for-the-logging-facet-within-the-storage-component">View the configuration for the &#39;Logging&#39; facet within the &#39;Storage&#39; component</h5>
<pre><code class="lang-bash">edgecmd Configuration Storage Logging
{
  &quot;logLevel&quot;: &quot;Information&quot;,
  &quot;logFileSizeLimitBytes&quot;: 34636833,
  &quot;logFileCountLimit&quot;: 31
}
</code></pre><h5 id="view-the-configuration-of-a-specific-entry-in-the-periodicegressendpoint-facet-within-the-storage-component">View the configuration of a specific entry in the &#39;PeriodicEgressEndpoint&#39; facet within the &#39;Storage&#39; component</h5>
<pre><code class="lang-bash">edgecmd Configuration Storage PeriodicEgressEndpoints id=Endpoint_1
{
  &quot;id&quot;: &quot;Endpoint_1&quot;,
  &quot;executionPeriod&quot;: &quot;2.00:00:00&quot;,
  &quot;name&quot;: null,
  &quot;description&quot;: null,
  &quot;enabled&quot;: true,
  &quot;endpoint&quot;: &quot;http://localhost:5590&quot;,
  &quot;clientId&quot;: null,
  &quot;clientSecret&quot;: null,
  &quot;userName&quot;: &quot;user_54&quot;,
  &quot;password&quot;: &quot;***************&quot;,
  &quot;validateEndpointCertificate&quot;: true,
  &quot;tokenEndpoint&quot;: null,
  &quot;debugExpiration&quot;: null,
  &quot;namespaceId&quot;: &quot;default&quot;,
  &quot;backfill&quot;: false,
  &quot;egressFilter&quot;: null,
  &quot;streamPrefix&quot;: null,
  &quot;typePrefix&quot;: null
}
</code></pre><h3 id="configure-edge-data-store">Configure Edge Data Store</h3>
<p>Complete the following to change all values of a facet:</p>
<ol>
<li>Open command line.</li>
<li><p>Type the <code>componentId</code> and <code>facetName</code>, followed by key=value pairs that you want to change. Then press Enter.</p>
<p>Example: Change all values in the &#39;Logging&#39; facet:</p>
<pre><code class="lang-bash">   edgecmd Configuration Storage Logging LogLevel=Warning LogFileSizeLimitBytes=32768 LogFileCountLimit=5
</code></pre></li>
</ol>
<p>Complete the following to configure any number of valid key=value pairs in a facet:</p>
<ol>
<li>Open command line.</li>
<li><p>Type the <code>componentId</code> and <code>facetName</code> followed by the key=value pairs that you want to change, and press Enter.</p>
<p>Example: Change a single value in the &#39;Logging&#39; facet:</p>
<pre><code class="lang-bash">   edgecmd Configuration Storage Logging LogFileCountLimit=5
</code></pre></li>
</ol>
<p>Complete the following to add an entry to a collection configuration:</p>
<ol>
<li>Open command line.</li>
<li><p>Type the <code>componentId</code> and <code>facetName</code> followed by the key=value pairs, and press Enter.</p>
<p>Example: Add the &#39;Health Endpoints&#39; facet to the &#39;System&#39; component:</p>
<pre><code class="lang-bash">   edgecmd Configuration System HealthEndpoints Id=endpoint_1 Endpoint=endpointURL UserName=UserName Password=Password
</code></pre><p> <strong>Note:</strong> If an entry with the specified ID already exists, it will be updated based on the new key=value pairs.</p>
</li>
</ol>
<h3 id="configure-with-json-files">Configure with JSON Files</h3>
<p>You can also configure Edge Data Store by a JSON file input into the EdgeCmd application. A file import completely replaces the existing configurations; therefore, you cannot use it to change individual values in a facet without modifying others.</p>
<p>Complete the following to import a bulk configuration:</p>
<ol>
<li>Open command line.</li>
<li><p>Type the following in the command line, replacing <code>PathToJsonFile</code> with the path to the file, and press Enter.</p>
<pre><code class="lang-bash">edgecmd Configuration file=PathToJsonFile
</code></pre></li>
</ol>
<p>Complete the following to import a facet specific configuration file for a component:</p>
<ol>
<li>Open command line.</li>
<li><p>Type the following in the command line, replacing the <code>componentId</code> with the ID of the component, <code>facetName</code> with the name of the facet, and <code>PathToJsonFile</code> with the path to the file. Then press Enter.</p>
<pre><code class="lang-bash">   edgecmd Configuration componentId facetName file=PathToJsonFile
</code></pre></li>
</ol>
<p>Complete the following to import a file with configuration for individual facets as a bulk file import operation:
    <strong>Note:</strong> The file must contain only information for the given component ID. </p>
<ol>
<li>Open command line.</li>
<li><p>Type the file name as shown in the following example and press Enter.</p>
<pre><code class="lang-bash">   edgecmd Configuration file=&quot;~/Bulk_Storage_Runtime.json&quot;
</code></pre></li>
</ol>
<p>The file &#39;Bulk_Storage_Runtime.json&#39; contains:</p>
<pre><code>    ```JSON
{
    &quot;Storage&quot;: {
        &quot;Runtime&quot;: {
            &quot;StreamStorageLimitMb&quot;: 66,
            &quot;StreamStorageTargetMb&quot;: 33,
            &quot;IngressDebugExpiration&quot;: &quot;2020-07-08T01:00:00&quot;,
            &quot;CheckpointRateInSec&quot;: 6,
            &quot;TransactionLogLimitMB&quot;: 350,
            &quot;EnableTransactionLog&quot;: true
        }
    }
}
```
</code></pre><p><strong>Note:</strong> The command only affects the specified key-value pairs for the &#39;Runtime&#39; facet in the &#39;Storage&#39; component, it does not change any other components or facets; however, import affects all key-value pairs in the facet. If you import the following example JSON file, the &#39;StreamStorageLimitMb&#39; and &#39;StreamStorageTargetMb&#39; values will be modified and the remaining values in the &#39;Runtime&#39; facet will be reset to their default values (IngressDebugExpiration, CheckpointRateInSec, TransactionLogLimitMB, and EnableTransactionLog).</p>
<pre><code>```JSON
{
    &quot;Storage&quot;: {
        &quot;Runtime&quot;: {
            &quot;StreamStorageLimitMb&quot;: 66,
            &quot;StreamStorageTargetMb&quot;: 33,
        }
    }
}
```
</code></pre><h3 id="delete-configuration-entry">Delete configuration entry</h3>
<p>Complete the following to delete a configuration entry from a collection configuration in Edge Data Store. For example, you could delete a single health endpoint of the &#39;HealthEndpoints&#39; facet within the &#39;System&#39; component.</p>
<ol>
<li>Open command line. </li>
<li>Type the <code>componentId</code> and <code>facetName</code> followed by the ID of the entry to be removed.</li>
<li><p>Add the <code>delete</code> keyword and press Enter.</p>
<p>Example deleting endpoint_1 of the HealthEndpoints facet from the System:</p>
<pre><code class="lang-bash">   edgecmd Configuration System HealthEndpoints Id=endpoint_1 delete
</code></pre></li>
</ol>
<h3 id="delete-configuration-file">Delete configuration file</h3>
<p>Complete the following to delete a configuration file from Edge Data Store. For example, you could delete the configuration file of the &#39;HealthEndpoints&#39; facet within the &#39;System&#39; component.</p>
<ol>
<li>Open command line. </li>
<li>Type the <code>componentId</code> and <code>facetName</code>.</li>
<li><p>Add the <code>delete</code> keyword and press Enter.</p>
<p>Example deleting HealthEndpoints facet configuration file:</p>
<pre><code class="lang-bash">   edgecmd Configuration System HealthEndpoints delete
</code></pre></li>
</ol>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/Edge-Data-Store-Docs/blob/master/V1/CommandLine/CommandLine.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
            <span id='copyright-text'>© 2019 - OSIsoft, LLC.<span>
        </span></span></div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>

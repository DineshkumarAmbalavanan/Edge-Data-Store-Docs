<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Storage runtime configuration </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Storage runtime configuration ">
    <meta name="generator" content="docfx 2.43.2.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../V1/index.html" width="46">
                <img id="logo" src="../../V1/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Edge System"> 
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="storageruntime">
<h1 id="storage-runtime-configuration">Storage runtime configuration</h1>

<p>Edge Data Store provides a mechanism for configuring runtime characteristics of the storage component.  </p>
<p><strong>Note:</strong> The configured defaults are sufficient for most scenarios.  You should modify these values only after consultation with OSIsoft Support personnel.</p>
<h2 id="configure-storage-runtime">Configure storage runtime</h2>
<p>To update the storage runtime configuration, complete the following:</p>
<ol>
<li><p>Create a JSON file with the storage runtime configuration.</p>
<p><strong>Note:</strong> See the following <em>Parameters</em> table for all available runtime parameters to define.
       See the following <em>Examples</em> section for an example of a valid runtime configuration file.</p>
</li>
<li><p>Save the JSON file with the name Storage_Runtime.config.json.</p>
</li>
<li><p>From the same directory where the file exists, run the following curl script:</p>
<pre><code class="lang-bash">curl -i -d &quot;@Storage_Runtime.config.json&quot; -H &quot;Content-Type: application/json&quot; -X PUT http://localhost:5590/api/v1/configuration/storage/Runtime
</code></pre><p><strong>Note:</strong> The @ symbol is a required prefix for the above command.</p>
</li>
</ol>
<h3 id="parameters">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>IngressDebugExpiration</strong></td>
<td>Required</td>
<td>string</td>
<td>If set, defines how long OMF ingress debug files should be produced.</td>
</tr>
<tr>
<td><strong>StreamStorageLimitMb</strong></td>
<td>Required</td>
<td>integer</td>
<td>The maximum size in megabytes that a stream can reach.</td>
</tr>
<tr>
<td><strong>StreamStorageTargetMb</strong></td>
<td>Required</td>
<td>integer</td>
<td>The size in megabytes that a stream will be reduced to after StreamStorageLimitMb size is reached for a single stream.</td>
</tr>
<tr>
<td><strong>EnableTransactionLog</strong></td>
<td>No</td>
<td>Boolean</td>
<td>Enables or disables the transaction log.  The transaction log helps to ensure no data is lost should a device lose power.</td>
</tr>
<tr>
<td><strong>TransactionLogLimitMB</strong></td>
<td>No</td>
<td>integer</td>
<td>Maximum size for transaction log file.  Transaction log files larger than this size will be deleted, resulting is loss of data should the device lose power.</td>
</tr>
<tr>
<td><strong>CheckpointRateInSec</strong></td>
<td>No</td>
<td>integer</td>
<td>How often to flush new data to store.</td>
</tr>
</tbody>
</table>
<h3 id="examples">Examples</h3>
<p>The following is a valid runtime configuration example.</p>
<pre><code>{
  &quot;streamStorageLimitMb&quot;: 2,
  &quot;streamStorageTargetMb&quot;: 1,
  &quot;ingressDebugExpiration&quot;: &quot;0001-01-01T00:00:00&quot;,
  &quot;checkpointRateInSec&quot;: 30,
  &quot;transactionLogLimitMB&quot;: 250,
  &quot;enableTransactionLog&quot;: true
}
</code></pre><h2 id="storage-runtime-configuration-properties">Storage runtime configuration properties</h2>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Required</th>
<th>Nullable</th>
<th>Defined by</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#ingressdebugexpiration">IngressDebugExpiration</a></td>
<td><code>string</code></td>
<td><strong>Required</strong></td>
<td>No</td>
<td>StorageRuntimeConfiguration (this schema)</td>
</tr>
<tr>
<td><a href="#streamstoragelimitmb">StreamStorageLimitMb</a></td>
<td><code>integer</code></td>
<td><strong>Required</strong></td>
<td>No</td>
<td>StorageRuntimeConfiguration (this schema)</td>
</tr>
<tr>
<td><a href="#streamstoragetargetmb">StreamStorageTargetMb</a></td>
<td><code>integer</code></td>
<td><strong>Required</strong></td>
<td>No</td>
<td>StorageRuntimeConfiguration (this schema)</td>
</tr>
<tr>
<td><a href="#enabletransactionlog">EnableTransactionLog</a></td>
<td><code>bool</code></td>
<td>No</td>
<td>No</td>
<td>StorageRuntimeConfiguration (this schema)</td>
</tr>
<tr>
<td><a href="#transactionloglimitmb">TransactionLogLimitMB</a></td>
<td><code>integer</code></td>
<td>No</td>
<td>No</td>
<td>StorageRuntimeConfiguration (this schema)</td>
</tr>
<tr>
<td><a href="#checkpointrateinsec">CheckpointRateInSec</a></td>
<td><code>integer</code></td>
<td>No</td>
<td>No</td>
<td>StorageRuntimeConfiguration (this schema)</td>
</tr>
</tbody>
</table>
<h3 id="ingressdebugexpiration">IngressDebugExpiration</h3>
<p>Ingress Debug Expiration is a property that can be used when debugging OMF. If the date and time is the future incoming OMF messages will be logged until the date and time specified. Once the configured time is past OMF messages will no longer be logged for debugging purposes.  Debugging will be enabled for all incoming OMF messages, and HTTP request and response content will be stored to disk for review. The property represents the date and time when debugging should no longer be enabled. You can also disable debugging if you set the value to <em>null</em>.</p>
<p>Examples of valid strings representing date and time:</p>
<pre><code>UTC: “yyyy-mm-ddThh:mm:ssZ”

Local: “mm-dd-yyyy hh:mm:ss”
</code></pre><p>The content of an incoming OMF message, including the headers, will be written to a file in the Logs directory. For an active application, this file can become quite large. As a result, debug information is stored to disk in another format than usual log messages. A single file is written to the usual logs directory for every incoming OMF type, container, and data message.</p>
<h4 id="ingressdebugexpiration-type">IngressDebugExpiration type</h4>
<p><code>string</code></p>
<ul>
<li>format: <code>date-time</code> date and time (according to <a href="http://tools.ietf.org/html/rfc3339">RFC 3339, section 5.6</a>)</li>
<li>minimum length: 1 character</li>
</ul>
<h3 id="streamstoragelimitmb">StreamStorageLimitMb</h3>
<p>StreamStorageLimitMb is the maximum size in megabytes that a stream can reach. When a stream exceeds the size specified, older data will be deleted from the file. Data will be removed from the stream until the stream is at or below the StreamStorageTargetMb value. It is recommended that the target value be smaller than the limit since trimming can be an expensive operation and should be done infrequently.</p>
<h4 id="streamstoragelimitmb-type">StreamStorageLimitMb type</h4>
<p><code>integer</code></p>
<ul>
<li>minimum value: <code>2</code></li>
<li>maximum value: <code>2147483647</code></li>
</ul>
<h3 id="streamstoragetargetmb">StreamStorageTargetMb</h3>
<p>StreamStorageTargetMb is the size in megabytes that a stream will be reduced to after StreamStorageLimitMb size is reached for a single stream. When a stream exceeds the size specified, older data will be deleted from the file. Data will be removed from the stream until the stream is at or below the StreamStorageTargetMb value. It is recommended that the target value be smaller than the limit since trimming can be an expensive operation and should be done infrequently.</p>
<h4 id="streamstoragetargetmb-type">StreamStorageTargetMb type</h4>
<p><code>integer</code></p>
<ul>
<li>minimum value: <code>1</code></li>
<li>maximum value: <code>2147483647</code></li>
</ul>
<h3 id="enabletransactionlog">EnableTransactionLog</h3>
<p>Defines whether the Storage component maintains a transaction log between checkpoint operations.  The transaction log helps the product reduce data loss, should the host device lose power.</p>
<h4 id="enabletransactionlog-type">EnableTransactionLog type</h4>
<p><code>bool</code></p>
<h3 id="transactionloglimitmb">TransactionLogLimitMB</h3>
<p>Defines the maximum size, in MB, of a transaction log.  Should a transaction log exceed this size, it will be deleted, thus reducing the amount of data that can be recovered should the host device lose power.</p>
<h4 id="transactionloglimitmb-type">TransactionLogLimitMB type</h4>
<p><code>integer</code></p>
<ul>
<li>minimum value: <code>1</code></li>
<li>maximum value: <code>2147483647</code></li>
</ul>
<h3 id="checkpointrateinsec">CheckpointRateInSec</h3>
<p>Defines how often the storage component ensures recent data and configuration changes are flushed to storage.  </p>
<p>A setting of 0 disables checkpointing.  Disabling checkpointing reduces the resiliency of the product and thus data loss can occur should the host device lose power.</p>
<p>The value is expressed in seconds.</p>
<h4 id="checkpointrateinsec-type">CheckpointRateInSec type</h4>
<p><code>integer</code></p>
<ul>
<li>minimum value: <code>0</code></li>
<li>maximum value: <code>86400</code></li>
</ul>
<p><strong>Note:</strong> All of the following <em>requirements</em> need to be fulfilled.</p>
<h5 id="requirement-1">Requirement 1</h5>
<ul>
<li><a href=""></a> <code>#/definitions/EdgeConfigurationBase</code></li>
</ul>
<h5 id="requirement-2">Requirement 2</h5>
<p><code>object</code> with following properties:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>IngressDebugExpiration</code></td>
<td>string</td>
<td><strong>Required</strong></td>
</tr>
<tr>
<td><code>StreamStorageLimitMb</code></td>
<td>integer</td>
<td><strong>Required</strong></td>
</tr>
<tr>
<td><code>StreamStorageTargetMb</code></td>
<td>integer</td>
<td><strong>Required</strong></td>
</tr>
<tr>
<td><code>EnableTransactionLog</code></td>
<td>bool</td>
<td>Optional</td>
</tr>
<tr>
<td><code>TransactionLogLimitMB</code></td>
<td>integer</td>
<td>Optional</td>
</tr>
<tr>
<td><code>CheckpointRateInSec</code></td>
<td>integer</td>
<td>Optional</td>
</tr>
</tbody>
</table>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/Edge-Data-Store-Docs/blob/master/V1/Configuration/Storage runtime config.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
            <span id='copyright-text'>© 2020 - OSIsoft, LLC.<span>
        </span></span></div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>

<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Modbus TCP EDS adapter quick start </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Modbus TCP EDS adapter quick start ">
    <meta name="generator" content="docfx 2.43.2.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../V1/index.html" width="46">
                <img id="logo" src="../../V1/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Edge System"> 
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="modbusQuickStart">
<h1 id="modbus-tcp-eds-adapter-quick-start">Modbus TCP EDS adapter quick start</h1>

<p>This topic provides quick start instructions for setting up the Modbus TCP EDS adapter. You can add a single Modbus TCP EDS adapter during Edge Data Store installation. For more information, see <a class="xref" href="../Installation/Install%20Edge%20Data%20Store.html">Install Edge Data Store</a>.</p>
<p>The following diagram depicts the data flow of a single Modbus TCP EDS adapter:</p>
<p><img src="https://osisoft.github.io/Edge-Data-Store-Docs/V1/images/EDSModbusTCP.jpg" alt="Modbus TCP EDS" title="Modbus TCP EDS"></p>
<h2 id="configure-a-modbus-tcp-data-source">Configure a Modbus TCP data source</h2>
<ol>
<li><p>Create a file in JSON format describing the location of the Modbus TCP data source. The adapter installed during installation is named Modbus1 in this example. Modify the following values to match your environment.</p>
<pre><code class="lang-json">{
    &quot;IpAddress&quot;: &quot;&lt;Modbus IP Address&gt;&quot;,
    &quot;Port&quot;: &lt;Port - usually 502&gt;,
    &quot;ConnectTimeout&quot;: 15000,
    &quot;ReconnectInterval&quot;: 5000,
    &quot;RequestTimeout&quot;: 9000,
    &quot;DelayBetweenRequests&quot;: 0,
    &quot;MaxResponseDataLength&quot;: 250
}
</code></pre></li>
<li><p>Enter the correct IP address and port for your Modbus data source.</p>
</li>
<li>Save the file with the name Modbus1DataSource.json. </li>
<li>Run the following curl script from the same directory where the file is located. </li>
</ol>
<p><strong>Note:</strong> You should run the script on the same computer where the Edge Data Store is installed.</p>
<pre><code class="lang-bash">curl -i -d &quot;@Modbus1Datasource.json&quot; -H &quot;Content-Type: application/json&quot; -X PUT http://localhost:5590/api/v1/configuration/Modbus1/Datasource
</code></pre><p>When the command completes successfully (a 204 is returned by curl), your Modbus TCP data source has been created. If you get a 400 error, check the JSON file for errors. If you get a 404 or 500 error, check that Edge Data Store is running on your device.</p>
<h2 id="configure-modbus-tcp-data-selection">Configure Modbus TCP data selection</h2>
<p>After you create the data source file, you select the streams you want to store in Edge Data Store by configuring Modbus data selection.  To configure the data selection file, complete the following:</p>
<ol>
<li>Create a file in JSON format to define each stream you want to ingress to Edge Data Store. </li>
<li><p>Save the following JSON content in a text file and name it Modbus1Dataselection.json. Modify the following values to match your environment:</p>
<pre><code class="lang-json">[{
        &quot;Selected&quot;: &quot;true&quot;,
        &quot;UnitId&quot;: 1,
        &quot;RegisterType&quot;: 3,
        &quot;RegisterOffset&quot;: 1,
        &quot;DataTypeCode&quot;: 20,
        &quot;BitMap&quot;: &quot;16151413&quot;,
        &quot;ConversionFactor&quot;: 2,
        &quot;ConversionOffset&quot;: 3.4,
        &quot;ScanRate&quot;: 500
    },
    {
        &quot;Selected&quot;: &quot;true&quot;,
        &quot;UnitId&quot;: 1,
        &quot;RegisterType&quot;: 3,
        &quot;RegisterOffset&quot;: 2,
        &quot;DataTypeCode&quot;: 20,
        &quot;BitMap&quot;: &quot;16151413&quot;,
        &quot;ConversionFactor&quot;: 2,
        &quot;ConversionOffset&quot;: 3.4,
        &quot;ScanRate&quot;: 500
    },
    {
        &quot;Selected&quot;: &quot;true&quot;,
        &quot;UnitId&quot;: 1,
        &quot;RegisterType&quot;: 3,
        &quot;RegisterOffset&quot;: 3,
        &quot;DataTypeCode&quot;: 20,
        &quot;BitMap&quot;: &quot;16151413&quot;,
        &quot;ConversionFactor&quot;: 2,
        &quot;ConversionOffset&quot;: 3.4,
        &quot;ScanRate&quot;: 500
    },
    {
        &quot;Selected&quot;: &quot;true&quot;,
        &quot;UnitId&quot;: 1,
        &quot;RegisterType&quot;: 3,
        &quot;RegisterOffset&quot;: 4,
        &quot;DataTypeCode&quot;: 20,
        &quot;BitMap&quot;: &quot;16151413&quot;,
        &quot;ConversionFactor&quot;: 2,
        &quot;ConversionOffset&quot;: 3.4,
        &quot;ScanRate&quot;: 500
    },
    {
        &quot;Selected&quot;: &quot;true&quot;,
        &quot;UnitId&quot;: 1,
        &quot;RegisterType&quot;: 3,
        &quot;RegisterOffset&quot;: 5,
        &quot;DataTypeCode&quot;: 20,
        &quot;BitMap&quot;: &quot;16151413&quot;,
        &quot;ConversionFactor&quot;: 2,
        &quot;ConversionOffset&quot;: 3.4,
        &quot;ScanRate&quot;: 500
    }
]
</code></pre></li>
<li><p>Run the following curl script to configure Edge Data Store to collect Modbus TCP data values:</p>
<pre><code class="lang-bash">curl -i -d &quot;@Modbus1Dataselection.json&quot; -H &quot;Content-Type: application/json&quot; -X PUT http://localhost:5590/api/v1/configuration/Modbus1/Dataselection
</code></pre></li>
</ol>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/Edge-Data-Store-Docs/blob/master/V1/Overview/ModbusQuickStart.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
            <span id='copyright-text'>© 2020 - OSIsoft, LLC.<span>
        </span></span></div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>

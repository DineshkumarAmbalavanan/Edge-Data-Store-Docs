<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>OPC UA EDS adapter quick start </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="OPC UA EDS adapter quick start ">
    <meta name="generator" content="docfx 2.43.2.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../V1/index.html" width="46">
                <img id="logo" src="../../V1/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Edge System"> 
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="opcUaQuickStart">
<h1 id="opc-ua-eds-adapter-quick-start">OPC UA EDS adapter quick start</h1>

<p>This topic provides quick start instructions for setting up an OPC UA EDS adapter. You can add a single OPC UA EDS adapter during Edge Data Store installation. For more information, see <a class="xref" href="../Installation/Install%20Edge%20Data%20Store.html">Install Edge Data Store</a>.  </p>
<p>The following diagram depicts the data flow of a single OPC UA EDS adapter:</p>
<p><img src="https://osisoft.github.io/Edge-Data-Store-Docs/V1/images/EDSOpcUA.jpg" alt="OPC UA EDS" title="OPC UA EDS"></p>
<h2 id="configure-an-opc-ua-data-source">Configure an OPC UA data source</h2>
<ol>
<li><p>Create a file in JSON format describing the location of the OPC UA data source. The adapter installed during installation is named OpcUa1 in this example. Modify the following values to match your environment.</p>
<pre><code class="lang-json">{
&quot;EndpointUrl&quot;: &quot;opc.tcp://&lt;ip address&gt;:&lt;port - often 62541&gt;/&lt;server path&gt;&quot;,
    &quot;UseSecureConnection&quot;: false,
    &quot;UserName&quot;: null,
    &quot;Password&quot;: null,
    &quot;RootNodeIds&quot;: null,
    &quot;IncomingTimestamp&quot;: &quot;Source&quot;,
    &quot;StreamIdPrefix&quot;: &quot;OpcUa&quot;
}
</code></pre></li>
<li><p>Enter the correct IP address and port for your OPC UA data source.</p>
</li>
<li>Save the file with the name OpcUa1Datasource.json.</li>
<li>Run the following curl script from the same directory where the file is located. </li>
</ol>
<p><strong>Note:</strong> You should run the script on the same computer where the Edge Data Store is installed.</p>
<pre><code class="lang-bash">curl -i -d &quot;@OpcUa1Datasource.json&quot; -H &quot;Content-Type: application/json&quot; -X PUT http://localhost:5590/api/v1/configuration/OpcUa1/Datasource
</code></pre><p>When the command completes successfully (a 204 is returned by curl), your OPC UA data source has been created. If you receive a 400 error, check the data source JSON file for errors. If you receive a 404 or 500 error, check to make sure Edge Data Store is running on your computer.</p>
<h2 id="configure-opc-ua-data-selection">Configure OPC UA data selection</h2>
<p>When you create the data source file, the OPC UA adapter auto generates the data selection file, which lists all available streams in the designated data source.  To configure the data selection file, complete the following:</p>
<ol>
<li>Save the data selection to your local device for editing.</li>
<li>Select each of the streams you want to ingress to Edge Data Store. All steams listed in the auto generated data selection file are initially set to deselect.</li>
<li><p>Save the following JSON content in a text file and name it OpcUa1Dataselection.json.</p>
<pre><code class="lang-json">[{
        &quot;Selected&quot;: true,
        &quot;Name&quot;: &quot;Cold Side Inlet Temperature&quot;,
        &quot;NodeId&quot;: &quot;ns=2;s=Line1.HeatExchanger1001.ColdSideInletTemperature&quot;,
        &quot;StreamId&quot;: null
    },
    {
        &quot;Selected&quot;: true,
        &quot;Name&quot;: &quot;Hot Side Inlet Temperature&quot;,
        &quot;NodeId&quot;: &quot;ns=2;s=Line1.HeatExchanger1001.HotSideInletTemperature&quot;,
        &quot;StreamId&quot;: null
    },
    {
        &quot;Selected&quot;: true,
        &quot;Name&quot;: &quot;Hot Side Outlet Temperature&quot;,
        &quot;NodeId&quot;: &quot;ns=2;s=Line1.HeatExchanger1001.HotSideOutletTemperature&quot;,
        &quot;StreamId&quot;: null
    },
    {
        &quot;Selected&quot;: false,
        &quot;Name&quot;: &quot;Cold Side Inlet Temperature&quot;,
        &quot;NodeId&quot;: &quot;ns=2;s=Line1.HeatExchanger1002.ColdSideInletTemperature&quot;,
        &quot;StreamId&quot;: null
    },
    {
        &quot;Selected&quot;: false,
        &quot;Name&quot;: &quot;Hot Side Outlet Temperature&quot;,
        &quot;NodeId&quot;: &quot;ns=2;s=Line1.HeatExchanger1002.HotSideOutletTemperature&quot;,
        &quot;StreamId&quot;: null
    }
]
</code></pre></li>
<li><p>Run the following curl script to configure Edge Data Store to collect OPC UA data values:</p>
<pre><code class="lang-bash">curl -i -d &quot;@OpcUa1Dataselection.json&quot; -H &quot;Content-Type: application/json&quot; -X PUT http://localhost:5590/api/v1/configuration/OpcUa1/Dataselection
</code></pre></li>
</ol>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/Edge-Data-Store-Docs/blob/master/V1/Overview/OpcUaQuickStart.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
            <span id='copyright-text'>© 2019 - OSIsoft, LLC.<span>
        </span></span></div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
